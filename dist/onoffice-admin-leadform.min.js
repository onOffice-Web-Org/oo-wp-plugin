document.addEventListener("DOMContentLoaded",(function(){document.querySelectorAll(".multi-page-title").forEach(((group,index)=>{const titleInputs=group.querySelectorAll("input[name^=oopluginformmultipagetitle-value]");const page=group.getAttribute("data-page");const localeSelect=group.querySelector("select[name=oopluginformmultipagetitle-locale].onoffice-input");titleInputs.forEach((titleInput=>{const parent=titleInput.closest(".wp-clearfix.custom-input-field");const langCode=titleInput.getAttribute("data-localized");const selectOption=Array.from(localeSelect.options).find((opt=>opt.value===langCode));if(langCode!=="native"){parent.appendChild(createDeleteButton(page,langCode,parent,selectOption));removeLanguageFromSelect(selectOption)}titleInput.name=`oopluginformmultipagetitle[${page}][${langCode}]`}));localeSelect.addEventListener("change",(function(){const selectedLocale=this.value;const selectedOption=this.options[localeSelect.selectedIndex];const selectedLocaleText=selectedOption.text;const parent=localeSelect.closest(".wp-clearfix.custom-input-field");const identifier=`oopluginformmultipagetitle[${page}][${selectedLocale}]`;let existingInput=group.querySelector(`input[name="${identifier}"]`);if(!existingInput){removeLanguageFromSelect(selectedOption);const paragraph=document.createElement("p");paragraph.classList.add("wp-clearfix","custom-input-field");paragraph.appendChild(createLabel(identifier,page,selectedLocaleText));paragraph.appendChild(createInput(identifier,selectedLocale));paragraph.appendChild(createDeleteButton(page,selectedLocale,paragraph,selectedOption));parent.insertAdjacentElement("beforebegin",paragraph)}localeSelect.value=""}))}));function removeLanguageFromSelect(selectOption){if(selectOption){selectOption.hidden=true;selectOption.style.display="none";selectOption.disabled=true}}function addLanguageToSelect(lang,selectOption){if(selectOption){selectOption.hidden=false;selectOption.style.display="block";selectOption.disabled=false}}function createLabel(identifier,page,selectedLocaleText){const label=document.createElement("label");const nativeInput=document.querySelector(`input[name="oopluginformmultipagetitle[${page}][native]"]`);if(nativeInput){const nativeLabel=document.querySelector(`label[for="${nativeInput.id}"]`);label.textContent=(nativeLabel?.textContent??"")+" "+selectedLocaleText}label.htmlFor=identifier;return label}function createInput(identifier,langCode){const input=document.createElement("input");const langShort=langCode.split("_")[0];input.id=identifier;input.type="text";input.name=identifier;input.setAttribute("lang",langShort);return input}function createDeleteButton(page,langCode,parent,selectOption){const deleteButton=document.createElement("button");deleteButton.id="deletePageTitle"+`[${page}][${langCode}]`;deleteButton.className="dashicons dashicons-dismiss multi-page-title-delete";deleteButton.type="button";deleteButton.setAttribute("aria-label",oOAdminLeadFormI18n.removeTitleForLanguage.replace("%s",langCode));deleteButton.addEventListener("click",(function(e){if(parent){parent.remove();addLanguageToSelect(langCode,selectOption)}}));return deleteButton}}));